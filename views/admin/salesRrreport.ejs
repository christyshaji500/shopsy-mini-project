<%- include('../layouts/adminheader.ejs') %>


<div class="container mt-3" style="padding-top: 0vh; z-index: 3  ;">
    <!-- <h3 style="margin-left: 40%;padding-bottom: 10px; ">SALES REPORT   <a href="/admin/download" class="pb-2 btn btn-primary" >Download</a></h3> -->
    
      <a href="/admin/dashboard" class="pb-1 btn btn-primary"   type="">Go Back</a>
    
    <form action="/admin/datewiseReport" method="post"> 
<div class="row" style="padding-bottom: 40px; padding-top: 40px;" id="sales-div">
    
    <div class="col-md-3">
    <input type="date" class="form-control" value="" name="Startingdate" style="width: 300px;">
    <span class="text-primary">Enter the Starting date</span>
    </div>
    <div class="col-md-3">
        <input type="date" class="form-control" value="" name="Endingdate" style="width: 300px;">
        <span class="text-primary">Enter the Ending date</span>
        </div>
        <div class="col-md-3">
            <button type="submit" id="date-donfirm"
              class=" btn btn-success ">
              <span>Confirm Date</span>
          </a>
          </div>
          </div>
         </form> 

        <div class="col-md-4">
          <a  style="font-weight: bold; border-radius: 20px" href="/admin/orderdetails?id=CONFIRMED"
          class=" btn btn-outline-warning ">
          <span>Daily</span>
      </a>
          <!-- <form method="POST" action="/Dailysales">
            <select class="form-select form-select-sm" style="width: 27%; border-color: rgb(15, 5, 5); border-width: 4px; color: rgb(15, 1, 3); border-radius: 20px; font-weight: bold;margin-bottom: 5px; margin-top: 5px;" aria-label=".form-select-sm example">
              <option selected>Daily</option>
              <option value="2023-01-01">January 2023</option>
              <option value="2023-02-01">February 2023</option>
              <option value="2023-03-01">March 2023</option>
              <option value="2023-04-01">April 2023</option>
              <option value="2023-05-01">May 2023</option>
              <option value="2023-06-01">June 2023</option>
              <option value="2023-07-01">JUly 2023</option>
              <option value="2023-08-01">August 2023</option>
              <option value="2023-09-01">September 2023</option>
              <option value="2023-10-01">October 2023</option>
              <option value="2023-11-01">November 2023</option>
              <option value="2023-12-01">December 2023</option>
            </select>
          <button class="btn btn-outline-success" type="submit">Show sales</button>
    </form>
      -->
         <a  style="font-weight: bold; border-radius: 20px" href="/admin/orderdetails?id=CONFIRMED"
          class=" btn btn-outline-info ">
          <span>Weekly</span>
      </a> 
      <!-- <form method="POST" action="/weeklysales">
        <select class="form-select form-select-sm" style="width: 27%; border-color: rgb(15, 5, 5); border-width: 4px; color: rgb(15, 1, 3); border-radius: 20px; font-weight: bold;margin-bottom: 5px; margin-top: 5px;" aria-label=".form-select-sm example">
          <option selected>Weekly</option>
          <option value="2023-01-01">January 2023</option>
          <option value="2023-02-01">February 2023</option>
          <option value="2023-03-01">March 2023</option>
          <option value="2023-04-01">April 2023</option>
          <option value="2023-05-01">May 2023</option>
          <option value="2023-06-01">June 2023</option>
          <option value="2023-07-01">JUly 2023</option>
          <option value="2023-08-01">August 2023</option>
          <option value="2023-09-01">September 2023</option>
          <option value="2023-10-01">October 2023</option>
          <option value="2023-11-01">November 2023</option>
          <option value="2023-12-01">December 2023</option>
        </select>
      <button class="btn btn-outline-danger" type="submit">Show sales</button>
</form> -->
      
         <a  style="font-weight: bold; border-radius: 20px" href="/admin/loadfullSales"
          class=" btn btn-outline-dark drop">
          <span>Monthly</span>
      </a> 
      <!-- <form method="post" action="/MonthlySales">
        <select class="form-select form-select-sm" style="width: 27%; border-color: rgb(18, 17, 17);
         border-width: 4px; color: rgb(15, 1, 3); border-radius: 20px; font-weight:
          bold; margin-bottom: 5px; margin-top: 5px;" aria-label=".form-select-sm example" name="month">
          <option selected>Monthly</option>
          <option value="2023-01-01">January 2023</option>
          <option value="2023-02-01">February 2023</option>
          <option value="2023-03-01">March 2023</option>
          <option value="2023-04-01">April 2023</option>
          <option value="2023-05-01">May 2023</option>
          <option value="2023-06-01">June 2023</option>
          <option value="2023-07-01">JUly 2023</option>
          <option value="2023-08-01">August 2023</option>
          <option value="2023-09-01">September 2023</option>
          <option value="2023-10-01">October 2023</option>
          <option value="2023-11-01">November 2023</option>
          <option value="2023-12-01">December 2023</option>
        </select>

      <button class="btn btn-outline-info" type="submit">Show sales</button>
</form>
       -->
      
         <!-- <a  style="font-weight: bold; border-radius: 20px" href="/admin/orderdetails?id=CONFIRMED"
          class=" btn btn-outline-danger ">
          <span>Yearly</span>
      </a>  -->
      
      </div>
    

   <br>
  <table id="myTab" class="table align-middle mb-0 bg-white">
      <thead class="bg-light">
        <tr>
          <th>Product</th>
          <th>Category</th>
          <th>Quantity Sold</th>
          <th>Total Price</th>
        </tr>
      </thead>
      <tbody>
          <% for(let i=1;i<=product.length;i++){ %>
        <tr>
          <td>
            <div class="d-flex align-items-center">
              
              <img
                  src="/admin/multer/img/<%=product[i-1].image[0]  %>"
                  alt=""
                  style="width: 45px; height: 45px"
                  class="rounded-circle"
                  />
                  
              <div class="ms-3">
                <p class="fw-bold mb-1 ml-3"><%=product[i-1].name %></p>
                <p class="text-muted mb-0 ml-3">Price: ₹<%=product[i-1].price  %></p>
              </div>
            </div>
          </td>
          <td>
            <p class="fw-normal mb-1"><%=product[i-1].category %></p>
            <p class="text-muted mb-0">Quantity:<%=product[i-1].quantity %></p>
          </td>
          <td>
              <div>
                  <p class="text-muted mb-0 ml-3"><%=product[i-1].sales %></p>
              </div>
          </td>
          <td>
              <p class="text-muted mb-0 ml-3">₹<%=product[i-1].price*product[i-1].sales %></p>
          </td>
          
        </tr>
       
        <% } %>
      </tbody>
      <footer>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </footer>
    </table>
    </div>
    <!-- <script>
      $(document).ready(function() {
      $('#myTab').DataTable( {
          dom: 'Bfrtip',
          buttons: [
              'copy', 'csv', 'excel', 'pdf', 'print'
          ]
      } );
  } )
      </script> -->

<script>
$(document).ready(function() {
  // Attach click event handler to update button
  $('#date-donfirm').click(function() {
    // Make AJAX request to server
    $.ajax({
      url: '/update-content', // URL of server-side route to handle the request
      method: 'POST', // HTTP method to use (e.g. GET, POST)
      data: { /* Optional data to send with the request */ },
      success: function(response) {
        // Update content of div with response from server
        $('#sales-div').html(response);
      },
      error: function() {
        alert('Error occurred while updating content');
      }
    });
  });
});


</script>

<%- include('../layouts/adminfooter.ejs') %>
